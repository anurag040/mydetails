<!-- Enhanced News Feed Layout -->
<div class="news-feed-container">
  <!-- Featured Article Section -->
  <section class="featured-section" *ngIf="currentMainArticle">
    <div class="featured-card">
      <div class="featured-content">
        <div class="featured-meta">
          <span class="category-badge">{{currentMainArticle.category}}</span>
          <span class="meta-date">{{currentMainArticle.dateFormatted}}</span>
          <span class="reading-time">üìñ 5 min read</span>
        </div>
        <h1 class="featured-title">{{currentMainArticle.title}}</h1>
        <p class="featured-excerpt">{{currentMainArticle.excerpt}}</p>
        <div class="featured-actions">
          <button class="btn-primary" (click)="readFullArticle()">
            <span>Read Full Article</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </button>
          <button class="btn-secondary" (click)="shareArticle()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
              <polyline points="16,6 12,2 8,6"/>
              <line x1="12" y1="2" x2="12" y2="15"/>
            </svg>
            <span>Share</span>
          </button>
        </div>
      </div>
      <div class="featured-media">
        <div class="payments-prism-3d" id="paymentsCanvas">
          <canvas id="threejs-canvas"></canvas>
        </div>
      </div>
    </div>
  </section>

  <!-- Content Grid -->
  <div class="content-grid">
    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Filter Section -->
      <div class="filter-section">
        <div class="filter-tabs">
          <button class="filter-tab active" (click)="filterByCategory('all')">
            <span>All News</span>
          </button>
          <button class="filter-tab" (click)="filterByCategory('markets')">
            <span>Markets</span>
          </button>
          <button class="filter-tab" (click)="filterByCategory('technology')">
            <span>Technology</span>
          </button>
          <button class="filter-tab" (click)="filterByCategory('finance')">
            <span>Finance</span>
          </button>
        </div>
        <button class="refresh-btn" (click)="refreshNews()" [disabled]="isLoading">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" [class.spinning]="isLoading">
            <polyline points="23 4 23 10 17 10"/>
            <polyline points="1 20 1 14 7 14"/>
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
          </svg>
          <span>Refresh</span>
        </button>
      </div>

      <!-- News Articles Grid -->
      <div class="articles-grid">
        <article class="news-card" *ngFor="let item of recentNews; trackBy: trackByNewsId; let i = index"
                 [style.animation-delay]="(i * 0.1) + 's'"
                 (click)="loadNewsInMain(item)">
          <div class="card-image">
            <img [src]="item.image" [alt]="item.title" loading="lazy" />
            <div class="card-category">{{item.category}}</div>
            <div class="trending-badge" *ngIf="item.trending">üî•</div>
          </div>
          <div class="card-content">
            <div class="card-meta">
              <span class="card-category">{{item.category}}</span>
              <span class="card-date">{{item.dateFormatted}}</span>
            </div>
            <h3 class="card-title">{{item.title}}</h3>
            <p class="card-excerpt">{{item.excerpt}}</p>
            <div class="card-footer">
              <div class="card-stats">
                <span>üëÅÔ∏è {{item.views}}</span>
                <span>üí¨ {{item.comments}}</span>
              </div>
              <span class="card-author">{{item.author}}</span>
            </div>
          </div>
        </article>
      </div>

      <!-- Load More -->
      <div class="load-more-section">
        <button class="btn-outline" (click)="loadMoreNews()">
          <span>Load More Articles</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M7 13l3 3 7-7"/>
            <path d="M12 2v10"/>
          </svg>
        </button>
      </div>
    </main>

    <!-- Sidebar -->
    <aside class="sidebar">
      <!-- Today's Stats -->
      <div class="stats-card">
        <h3 class="stats-title">Today's Digest</h3>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-number">{{todayNewsCount}}</div>
            <div class="stat-label">Articles</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">{{trendingCount}}</div>
            <div class="stat-label">Trending</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">{{totalNewsCount}}</div>
            <div class="stat-label">Total</div>
          </div>
        </div>
      </div>

      <!-- Trending Topics -->
      <div class="topics-card">
        <h3 class="topics-title">Trending Topics</h3>
        <div class="topics-list">
          <span class="topic-tag" *ngFor="let topic of trendingTopics">{{topic}}</span>
        </div>
      </div>

      <!-- Newsletter -->
      <div class="newsletter-card">
        <h3 class="newsletter-title">Stay Updated</h3>
        <p class="newsletter-desc">Get the latest financial news delivered to your inbox</p>
        <div class="newsletter-form">
          <input type="email" placeholder="Enter your email" class="newsletter-input">
          <button class="btn-primary">Subscribe</button>
        </div>
      </div>
    </aside>
  </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" *ngIf="isLoading">
  <div class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading latest financial intelligence...</p>
  </div>
</div>
