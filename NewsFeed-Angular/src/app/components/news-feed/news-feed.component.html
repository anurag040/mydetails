<!-- Main Content Grid Layout -->
<div class="container-center">
  <div class="grid">
  <!-- Left: Main Content Area -->
  <div class="main-content">
    <!-- Enhanced Feature Story -->
    <article class="card feature" aria-label="Feature article">
  <figure class="media">
    <div class="payments-prism-3d" id="paymentsCanvas">
      <canvas id="threejs-canvas"></canvas>
    </div>
  </figure>
  <div class="content">
    <div class="meta-row">
      <!-- Comment out the category pill -->
      <!-- <span class="pill" [style.background]="getRandomGradient()">{{currentMainArticle.category}}</span> -->
      
      <!-- Hashtags styled like Market Intelligence label -->
      <span class="market-intelligence-tag" 
            *ngFor="let t of featureTagCloud; let i = index; trackBy: trackByTagIndex">
        {{t.text}}
      </span>
      
      <time [attr.datetime]="currentMainArticle.date">{{currentMainArticle.dateFormatted}}</time>
      <span class="reading-time">📖 3 min read</span>
    </div>
    <h1>{{currentMainArticle.title}}</h1>
    <p class="excerpt" [innerHTML]="getArticleContent()">
    </p>
    <div class="byline">
      <div class="author-info">
        <span class="author-name">{{currentMainArticle.author}}</span>
      </div>
      <span class="dot" aria-hidden="true"></span>
      <span class="stat">👁️ {{currentMainArticle.views}} Views</span>
      <span class="dot" aria-hidden="true"></span>
      <span class="stat">📤 {{currentMainArticle.shares}} Shares</span>
      <span class="dot" aria-hidden="true"></span>
      <span class="stat">💬 {{currentMainArticle.comments}} Comments</span>
    </div>
    
    <!-- Enhanced Action Buttons -->
    <div class="feature-actions">
      <button class="action-btn primary" (click)="readFullArticle()">
        <span>{{getReadButtonText()}}</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </button>
      <button class="action-btn secondary" (click)="shareArticle()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
          <polyline points="16,6 12,2 8,6"/>
          <line x1="12" y1="2" x2="12" y2="15"/>
        </svg>
        <span>Share</span>
      </button>
    </div>
  </div>
</article>
  </div> <!-- End main-content -->

  <!-- Right: Enhanced Recent News Sidebar -->
  <aside class="sidebar" aria-label="Recent news">
    <div class="sidebar-header">
      <div class="title">📰 Recent Financial News</div>
      <button class="refresh-btn" (click)="refreshNews()" [disabled]="isLoading">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" [class.spinning]="isLoading">
          <polyline points="23 4 23 10 17 10"/>
          <polyline points="1 20 1 14 7 14"/>
          <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
        </svg>
      </button>
    </div>

    <!-- Well-organized News List -->
    <div class="sidebar-news-list">
      <article class="sidebar-news-item" 
               *ngFor="let item of recentNews; trackBy: trackByNewsId; let i = index"
               [style.animation-delay]="(i * 0.1) + 's'"
               (click)="loadNewsInMain(item)">
        
        <div class="news-thumb">
          <img [src]="item.image" [alt]="item.title" loading="lazy" />
          <div class="category-badge" [style.background]="getCategoryColor(item.category)">
            {{getCategoryIcon(item.category)}}
          </div>
          <div *ngIf="item.trending" class="trending-indicator">🔥</div>
        </div>
        
        <div class="news-content">
          <div class="news-meta">
            <span class="category-pill" [style.background]="getCategoryColor(item.category)">
              {{item.category}}
            </span>
            <time class="news-date">{{item.dateFormatted}}</time>
          </div>
          
          <h3 class="news-title" [innerHTML]="highlightSearchTerm(item.title)"></h3>
          
          <div class="news-stats">
            <span class="stat">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              {{item.views}}
            </span>
            <span class="stat">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                <polyline points="16,6 12,2 8,6"/>
                <line x1="12" y1="2" x2="12" y2="15"/>
              </svg>
              {{item.shares}}
            </span>
          </div>
        </div>
      </article>
    </div>

  <!-- Quick Stats in Sidebar -->
  <div class="quick-stats">
    <div class="stat-item">
      <span class="stat-number">{{todayNewsCount}}</span>
      <span class="stat-label">Today's News</span>
    </div>
    <div class="stat-item">
      <span class="stat-number">{{trendingCount}}</span>
      <span class="stat-label">Trending</span>
    </div>
  </div>

  <!-- Enhanced CTA with Analytics -->
  <div class="sidebar-footer">
    <button class="cta" type="button" (click)="viewAllNews()">
      <span>View All {{totalNewsCount}}</span>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 12h14M12 5l7 7-7 7"/>
      </svg>
    </button>
  </div>
</aside>
  </div> <!-- End grid -->
</div> <!-- End container-center -->

<!-- Loading Overlay -->
<div *ngIf="isLoading" class="loading-overlay">
  <div class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading latest financial intelligence...</p>
  </div>
</div>
